<!DOCTYPE html>
<head>
    <script src="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.css" />
</head>
<body>
  <!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->

  <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/7.22.1/firebase-app.js"></script>

  <!-- Add Firebase products that you want to use -->
  <script src="https://www.gstatic.com/firebasejs/7.22.1/firebase-auth.js"></script>

  <script>
    // TODO: Replace the following with your app's Firebase project configuration
    // For Firebase JavaScript SDK v7.20.0 and later, `measurementId` is an optional field
    var firebaseConfig = {
        apiKey: 'AIzaSyDED3Jt_j61uGF2wy-DJMlgoFLx4gJkuK8',
        projectId: 'fir-graphql-starter-e1ea3',
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    var ui = new firebaseui.auth.AuthUI(firebase.auth());

    ui.start('#firebaseui-auth-container', {
        signInOptions: [
            firebase.auth.EmailAuthProvider.PROVIDER_ID
        ],
        callbacks: {
            signInSuccessWithAuthResult: function() {
                return false;
            }
        }
    });

    // console.log('firebase auth', firebase.auth());

    firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
            user.getIdToken(true).then(function(idToken) {
                console.log(idToken);
            });
        }
    })

    // firebase.auth().currentUser.getIdToken(true).then(function(idToken) {
    //     console.log('token!', idToken);
    // }).catch(function(error) {
    //     console.log('error getting token', error);
    // })
  </script>
    <h1>Welcome to My Awesome App</h1>
    <div id="firebaseui-auth-container"></div>
</body>
</html>